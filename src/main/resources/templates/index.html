<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Spring Boot Thymeleaf Application - Bootstrap Table</title>
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://use.fontawseom.com/release/v5.4.1/css/all.css">
<link th:rel="stylesheet"
	th:href="@{webjars/bootstrap/4.0.0-2/css/bootstrap.min.css} " />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://kit.fontawesome.com/a076d05300.js"></script>
<script type="text/javascript">
	$(document)
			.ready(
					function() {

						$('#stateBox')
								.change(
										function() {
											var stateId = $(this).val();
											$
													.ajax({
														type : 'GET',
														url : '/loadDistByState/'
																+ stateId,
														success : function(
																result) {

															var s = '';
															for (var i = 0; i < result.length; i++) {
																s += '<option value="'+result[i].district_id+'">'
																		+ result[i].district_name
																		+ '</option>';
															}
															$('#distBox').html(
																	s);
														}
													})
										});
					});
</script>
<style>
img {
	width: 100%;
	height: 20%;
}

.myDiv {
	display: none;
}

* {
	box-sizing: border-box
}

body {
	font-family: "Lato", sans-serif;
}

/* Style the tab */
.tab {
	float: left;
	border: 1px solid #ccc;
	background-color: #f1f1f1;
	width: 30%;
	height: 300px;
}

/* Style the buttons inside the tab */
.tab button {
	display: block;
	background-color: inherit;
	color: black;
	padding: 22px 16px;
	width: 100%;
	border: none;
	outline: none;
	text-align: left;
	cursor: pointer;
	transition: 0.3s;
	font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
	background-color: #ddd;
}

/* Create an active/current "tab button" class */
.tab button.active {
	background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
	float: left;
	padding: 0px 12px;
	border: 1px solid #ccc;
	width: 70%;
	border-left: none;
	height: 300px;
}
</style>
</head>
<body>

	<div class="container">
		<img th:src="@{/cvc.png}" align="center">
		<div class="card-body">

			<div class="tab">
				<button class="tablinks" onclick="openCity(event, 'Paris')"
					id="defaultOpen">By State</button>
				<button class="tablinks" onclick="openCity(event, 'London')">By
					Pincode</button>
				<button class="tablinks" onclick="openCity(event, 'Kolkata')">Cancel
					Subscription</button>

			</div>

			<div id="Kolkata" class="tabcontent">

				<h3>Cancel Subscription</h3>
				<form th:action="@{/unsubscribe}" method="post" align="center">
					Email <input type="text" field="*{email}" th:name="email"
						name="email" id="email" align="center"></input> <input
						type="submit" class="btn btn-primary" value="Subscribe"
						align="center">
				</form>

			</div>

			<div id="Paris" class="tabcontent">
				<br>
				<h3>Subscribe for Email Notification</h3>
				<br>
				<table>
					<form th:action="@{/subscribe}" method="post" align="center">

						<tr>
							<td>State <select id="stateBox">
									<option value="">Select State</option>
									<option th:each="state : ${stateList}"
										th:value="${state.state_id}" th:text="${state.state_name}"></option>
							</select>
							</td>
						</tr>
						<tr>
							<td>District <select name="distBox" id="distBox"></select>
							</td>
						</tr>
					<tr>
						<td>Email <input type="text" field="*{email}" th:name="email"
							name="email" id="email" align="center"></input> <input
							type="submit" class="btn btn-primary" value="Subscribe"
							align="center">
						</td>
					</tr>
					</form>
				</table>
			</div>

			<div id="London" class="tabcontent">
				<table>
					<tr>

						<td></td>
						<td></td>
						<td></td>
						<br>
						<td align="left">Search by Pincode
							<form action="#" th:action="@{/cowin}"
								th:object="${availableList}" method="post" align="center">
								<input type="text" field="*{search}" th:name="search"
									name="search" id="search" align="center"></input> <input
									type="submit" class="btn btn-primary" value="Check"
									align="center">
							</form>
						</td>

					</tr>


				</table>
				<br>
				<h3>Subscribe for Email Notification</h3>
				<table>
					<form action="#" th:action="@{/subscribeByPin}"
						th:object="${availableList}" method="post" align="center">
						<tr>

							<td>pincode</td>
							<td><input type="text" field="*{pincode}" th:name="pincode"
								name="pincode" id="pincode" align="center"></input></td>
							<td>Email</td>
							<td><input type="text" field="*{email}" th:name="email"
								name="email" id="email" align="center"></input></td>
							<td><input type="submit" class="btn btn-primary"
								value="Subscribe" align="center"></td>
						</tr>

					</form>

				</table>
			</div>

		</div>

	</div>


	<div class="container">
		<div th:switch="${availableList}">
			<br>
			<div>
				<table class="table">
					<thead class="thead-dark">
						<tr>
							<th>Name</th>
							<th>Address</th>

						</tr>
					</thead>



					<tbody>

						<div th:unless="${#lists.isEmpty(availableList)}">
							<tr th:each="oxy : ${availableList}">
								<td th:text="${oxy.name}"></td>
								<td th:text="${oxy.address}"></td>
								<td>
									<div th:switch=${oxy.slots}>
										<table class="table">
											<thead class="thead-grey">
												<tr>
													<th>Date</th>
													<th>Seat</th>

												</tr>
											</thead>
											<tbody>
												<tr th:each="slot : ${oxy.slots}">
													<td th:text="${slot.date}"></td>
													<td th:text="${slot.seat}"></td>
												</tr>
										</table>

									</div>
								</td>
							</tr>
						</div>
					</tbody>

				</table>
				<div th:if="${#lists.isEmpty(availableList)}">
					<h2>No Seat Available</h2>

				</div>

			</div>
		</div>
	</div>



	<script
		th:src="@{assets/bootstrap-select-1.13.9/dist/js/bootstrap-select.js}">
		
	</script>
	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>

	<script>
		
	</script>

	<script>
		function openCity(evt, cityName) {
			var i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(
						" active", "");
			}
			document.getElementById(cityName).style.display = "block";
			evt.currentTarget.className += " active";
		}

		// Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	</script>

</body>
</html>


